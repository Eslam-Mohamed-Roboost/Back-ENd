2025-11-22 11:02:40.152 +02:00 [INF] Starting APP
2025-11-22 11:02:47.462 +02:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-11-22 11:02:53.239 +02:00 [INF] HTTP GET / responded 302 in 15.0997 ms
2025-11-22 11:02:53.534 +02:00 [INF] HTTP GET /scalar/v1 responded 200 in 247.3872 ms
2025-11-22 11:02:53.586 +02:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 200 in 25.8745 ms
2025-11-22 11:02:53.619 +02:00 [INF] HTTP GET /scalar/scalar.js responded 200 in 58.0351 ms
2025-11-22 11:02:54.159 +02:00 [INF] HTTP GET /openapi/v1.json responded 200 in 280.4570 ms
2025-11-22 11:02:54.163 +02:00 [INF] HTTP GET /openapi/v1.json responded 200 in 4.1577 ms
2025-11-22 11:02:54.524 +02:00 [INF] HTTP GET /scalar/favicon.svg responded 200 in 0.6478 ms
2025-11-22 11:23:50.094 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-22 11:23:52.955 +02:00 [ERR] An unhandled exception occurred.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at API.Middlewares.RequestTimeoutMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/RequestTimeoutMiddleware.cs:line 44
   at API.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/GlobalExceptionMiddleware.cs:line 20
2025-11-22 11:24:18.096 +02:00 [ERR] An unhandled exception occurred.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at API.Middlewares.RequestTimeoutMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/RequestTimeoutMiddleware.cs:line 44
   at API.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/GlobalExceptionMiddleware.cs:line 20
2025-11-22 11:24:32.839 +02:00 [INF] Starting APP
2025-11-22 11:24:40.721 +02:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-11-22 11:24:41.602 +02:00 [INF] HTTP GET / responded 302 in 11.0810 ms
2025-11-22 11:24:41.967 +02:00 [INF] HTTP GET /scalar/v1 responded 200 in 312.9803 ms
2025-11-22 11:24:42.013 +02:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 200 in 8.7897 ms
2025-11-22 11:24:42.044 +02:00 [INF] HTTP GET /scalar/scalar.js responded 200 in 53.4332 ms
2025-11-22 11:24:42.606 +02:00 [INF] HTTP GET /openapi/v1.json responded 200 in 280.6600 ms
2025-11-22 11:24:42.610 +02:00 [INF] HTTP GET /openapi/v1.json responded 200 in 4.0254 ms
2025-11-22 11:24:42.955 +02:00 [INF] HTTP GET /scalar/favicon.svg responded 200 in 0.8826 ms
2025-11-22 11:24:46.607 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-22 11:24:49.194 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2595.1375 ms
2025-11-22 11:25:48.444 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2007.4862 ms
2025-11-22 11:26:46.199 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1883.6669 ms
2025-11-22 11:26:48.220 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2017.8780 ms
2025-11-22 11:27:27.078 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2095.2541 ms
2025-11-22 11:27:29.333 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2253.1322 ms
2025-11-22 11:27:40.497 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1954.0771 ms
2025-11-22 11:28:00.478 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1925.7787 ms
2025-11-22 11:29:08.090 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2284.6905 ms
2025-11-22 11:29:10.351 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2259.5435 ms
2025-11-22 11:29:19.212 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1953.6195 ms
2025-11-22 11:29:21.402 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2187.0735 ms
2025-11-22 11:31:03.248 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 3380.6052 ms
2025-11-22 11:31:03.254 +02:00 [WRN] ⚠️ Slow Request Detected! Path: /Dashboard/DashboardStats, Method: GET, Time Taken: 3380ms
2025-11-22 11:31:05.238 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1988.9362 ms
2025-11-22 11:31:11.581 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2102.7473 ms
2025-11-22 11:31:13.542 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1959.1532 ms
2025-11-22 11:31:29.806 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2095.3645 ms
2025-11-22 11:31:51.723 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1986.8884 ms
2025-11-22 11:32:49.843 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2104.4086 ms
2025-11-22 11:32:55.005 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2075.9053 ms
2025-11-22 11:33:52.663 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2058.7731 ms
2025-11-22 11:34:29.206 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2068.7128 ms
2025-11-22 11:34:34.034 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1979.9577 ms
2025-11-22 11:35:25.259 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2041.4584 ms
2025-11-22 11:35:58.369 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2060.8246 ms
2025-11-22 11:36:35.075 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 3438.3719 ms
2025-11-22 11:36:35.077 +02:00 [WRN] ⚠️ Slow Request Detected! Path: /Dashboard/DashboardStats, Method: GET, Time Taken: 3461ms
2025-11-22 11:38:43.693 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1955.8176 ms
2025-11-22 11:39:04.675 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1962.0919 ms
2025-11-22 11:39:36.382 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1956.9874 ms
2025-11-22 11:39:43.837 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2194.5242 ms
2025-11-22 11:40:12.253 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2031.2055 ms
2025-11-22 11:40:56.374 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1897.1512 ms
2025-11-22 11:41:02.064 +02:00 [ERR] An unhandled exception occurred.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at API.Middlewares.RequestTimeoutMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/RequestTimeoutMiddleware.cs:line 44
   at API.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/GlobalExceptionMiddleware.cs:line 20
2025-11-22 11:41:06.240 +02:00 [ERR] Connection id "0HNH9L3RK8PHP", Request id "0HNH9L3RK8PHP:00000051": An unhandled exception was thrown by the application.
Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.NotSupportedException:  This method may not be called when another read operation is pending.
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.Consume(Boolean async, Exception firstException)
   at Npgsql.NpgsqlDataReader.Consume(Boolean async, Exception firstException)
   at Npgsql.NpgsqlDataReader.Close(Boolean async, Boolean connectionClosing, Boolean isDisposing)
   at Npgsql.Internal.NpgsqlConnector.CloseOngoingOperations(Boolean async)
   at Npgsql.NpgsqlConnection.CloseAsync(Boolean async)
   at Npgsql.NpgsqlConnection.Close()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.CloseDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.ResetState(Boolean disposeDbConnection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Dispose()
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.Dispose()
   at Microsoft.EntityFrameworkCore.DbContext.Dispose()
   at API.Domain.UnitOfWork.UnitOfWork.Dispose() in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Domain/UnitOfWork/UnitOfWork.cs:line 16
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.DisposeAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<FireOnCompleted>g__ProcessEvents|242_0(HttpProtocol protocol, Stack`1 events)
2025-11-22 11:41:06.254 +02:00 [ERR] Failed executing DbCommand (4,175ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM public."Chef_names" AS c
2025-11-22 11:41:06.270 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'API.Infrastructure.Persistence.DbContexts.ApplicationDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation canceled.
 ---> System.Net.Sockets.SocketException (125): Operation canceled
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation canceled.
 ---> System.Net.Sockets.SocketException (125): Operation canceled
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-22 11:41:08.847 +02:00 [ERR] An unhandled exception occurred.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at API.Middlewares.RequestTimeoutMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/RequestTimeoutMiddleware.cs:line 44
   at API.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/GlobalExceptionMiddleware.cs:line 20
2025-11-22 11:41:13.251 +02:00 [ERR] Connection id "0HNH9L3RK8PHP", Request id "0HNH9L3RK8PHP:00000053": An unhandled exception was thrown by the application.
Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.NotSupportedException:  This method may not be called when another read operation is pending.
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.Consume(Boolean async, Exception firstException)
   at Npgsql.NpgsqlDataReader.Consume(Boolean async, Exception firstException)
   at Npgsql.NpgsqlDataReader.Close(Boolean async, Boolean connectionClosing, Boolean isDisposing)
   at Npgsql.Internal.NpgsqlConnector.CloseOngoingOperations(Boolean async)
   at Npgsql.NpgsqlConnection.CloseAsync(Boolean async)
   at Npgsql.NpgsqlConnection.Close()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.CloseDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.ResetState(Boolean disposeDbConnection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Dispose()
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.Dispose()
   at Microsoft.EntityFrameworkCore.DbContext.Dispose()
   at API.Domain.UnitOfWork.UnitOfWork.Dispose() in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Domain/UnitOfWork/UnitOfWork.cs:line 16
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.DisposeAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<FireOnCompleted>g__ProcessEvents|242_0(HttpProtocol protocol, Stack`1 events)
2025-11-22 11:41:13.252 +02:00 [ERR] Failed executing DbCommand (114ms) [Parameters=[@__p_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM public."Chef_names" AS c
WHERE c.created_at >= @__p_0
2025-11-22 11:41:13.268 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'API.Infrastructure.Persistence.DbContexts.ApplicationDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation canceled.
 ---> System.Net.Sockets.SocketException (125): Operation canceled
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation canceled.
 ---> System.Net.Sockets.SocketException (125): Operation canceled
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-22 11:41:15.616 +02:00 [ERR] An unhandled exception occurred.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at API.Middlewares.RequestTimeoutMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/RequestTimeoutMiddleware.cs:line 44
   at API.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/GlobalExceptionMiddleware.cs:line 20
2025-11-22 11:41:15.621 +02:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM public."Chef_names" AS c
WHERE c.created_at >= @__p_0
2025-11-22 11:41:15.624 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'API.Infrastructure.Persistence.DbContexts.ApplicationDbContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): The connection is already in state 'Executing'
   at Npgsql.ThrowHelper.ThrowNpgsqlOperationInProgressException(ConnectorState state)
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|282_0(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): The connection is already in state 'Executing'
   at Npgsql.ThrowHelper.ThrowNpgsqlOperationInProgressException(ConnectorState state)
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|282_0(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-22 11:41:18.098 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2054.5698 ms
2025-11-22 11:41:36.664 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1995.7174 ms
2025-11-22 11:41:39.512 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2069.1242 ms
2025-11-22 11:42:01.495 +02:00 [ERR] An unhandled exception occurred.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at API.Middlewares.RequestTimeoutMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/RequestTimeoutMiddleware.cs:line 44
   at API.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/GlobalExceptionMiddleware.cs:line 20
2025-11-22 11:42:01.503 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@__oneMonthAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(e.amount), 0.0)
FROM public.event_transactions AS e
WHERE e.status = 'completed' AND e.created_at >= @__oneMonthAgo_0
2025-11-22 11:42:01.505 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'API.Infrastructure.Persistence.DbContexts.ApplicationDbContext'.
System.InvalidOperationException: Connection is not open
   at Npgsql.ThrowHelper.ThrowInvalidOperationException(String message)
   at Npgsql.NpgsqlCommand.CheckAndGetConnection()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection is not open
   at Npgsql.ThrowHelper.ThrowInvalidOperationException(String message)
   at Npgsql.NpgsqlCommand.CheckAndGetConnection()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-22 11:42:03.996 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2003.3820 ms
2025-11-22 11:42:49.916 +02:00 [INF] Starting APP
2025-11-22 11:42:57.076 +02:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-11-22 11:42:59.897 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-22 11:43:03.016 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 3121.6286 ms
2025-11-22 11:43:03.039 +02:00 [WRN] ⚠️ Slow Request Detected! Path: /Dashboard/DashboardStats, Method: GET, Time Taken: 3154ms
2025-11-22 11:43:34.105 +02:00 [INF] HTTP GET /scalar/favicon.svg responded 200 in 16.3268 ms
2025-11-22 11:43:38.590 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2143.2992 ms
2025-11-22 11:43:42.173 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1998.4069 ms
2025-11-22 11:43:44.890 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2059.0734 ms
2025-11-22 11:43:50.877 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2104.7465 ms
2025-11-22 11:43:56.066 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1970.0537 ms
2025-11-22 11:45:05.502 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2184.0522 ms
2025-11-22 11:45:16.348 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1929.1556 ms
2025-11-22 11:46:59.722 +02:00 [ERR] An unhandled exception occurred.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at API.Middlewares.RequestTimeoutMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/RequestTimeoutMiddleware.cs:line 44
   at API.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/GlobalExceptionMiddleware.cs:line 20
2025-11-22 11:47:05.078 +02:00 [ERR] Connection id "0HNH9LE2UPQSI", Request id "0HNH9LE2UPQSI:00000017": An unhandled exception was thrown by the application.
Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.NotSupportedException:  This method may not be called when another read operation is pending.
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.Consume(Boolean async, Exception firstException)
   at Npgsql.NpgsqlDataReader.Consume(Boolean async, Exception firstException)
   at Npgsql.NpgsqlDataReader.Close(Boolean async, Boolean connectionClosing, Boolean isDisposing)
   at Npgsql.Internal.NpgsqlConnector.CloseOngoingOperations(Boolean async)
   at Npgsql.NpgsqlConnection.CloseAsync(Boolean async)
   at Npgsql.NpgsqlConnection.Close()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.CloseDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.ResetState(Boolean disposeDbConnection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Dispose()
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.Dispose()
   at Microsoft.EntityFrameworkCore.DbContext.Dispose()
   at API.Domain.UnitOfWork.UnitOfWork.Dispose() in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Domain/UnitOfWork/UnitOfWork.cs:line 16
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.DisposeAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<FireOnCompleted>g__ProcessEvents|242_0(HttpProtocol protocol, Stack`1 events)
2025-11-22 11:47:05.109 +02:00 [ERR] Failed executing DbCommand (5,353ms) [Parameters=[@__p_0='?' (DbType = DateTime), @__p_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM public."Chef_names" AS c
WHERE c.created_at >= @__p_0 AND c.created_at < @__p_1
2025-11-22 11:47:05.129 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'API.Infrastructure.Persistence.DbContexts.ApplicationDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation canceled.
 ---> System.Net.Sockets.SocketException (125): Operation canceled
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation canceled.
 ---> System.Net.Sockets.SocketException (125): Operation canceled
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-22 11:47:08.575 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 3505.0375 ms
2025-11-22 11:47:08.576 +02:00 [WRN] ⚠️ Slow Request Detected! Path: /Dashboard/DashboardStats, Method: GET, Time Taken: 3505ms
2025-11-22 11:47:49.270 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1957.1908 ms
2025-11-22 11:48:22.539 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2075.6278 ms
2025-11-22 11:48:36.284 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1874.8859 ms
2025-11-22 11:49:02.393 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1903.5410 ms
2025-11-22 11:49:20.252 +02:00 [ERR] An unhandled exception occurred.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at API.Middlewares.RequestTimeoutMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/RequestTimeoutMiddleware.cs:line 44
   at API.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in /home/eslam/Documents/GitHub/CQRS-With-Vertical-Slicing/Middlewares/GlobalExceptionMiddleware.cs:line 20
2025-11-22 11:49:20.256 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@__oneMonthAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM public.events AS e
WHERE e.created_at >= @__oneMonthAgo_0
2025-11-22 11:49:20.260 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'API.Infrastructure.Persistence.DbContexts.ApplicationDbContext'.
System.InvalidOperationException: Connection is not open
   at Npgsql.ThrowHelper.ThrowInvalidOperationException(String message)
   at Npgsql.NpgsqlCommand.CheckAndGetConnection()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection is not open
   at Npgsql.ThrowHelper.ThrowInvalidOperationException(String message)
   at Npgsql.NpgsqlCommand.CheckAndGetConnection()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-22 11:49:22.765 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1977.5346 ms
2025-11-22 11:50:20.305 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1944.2550 ms
2025-11-22 11:50:25.512 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1803.6810 ms
2025-11-22 11:51:22.174 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1965.4649 ms
2025-11-22 11:51:28.318 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 1974.1130 ms
2025-11-22 11:51:31.553 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 2047.2236 ms
2025-11-22 11:54:15.744 +02:00 [INF] HTTP GET /Dashboard/DashboardStats responded 200 in 3296.1492 ms
2025-11-22 11:54:15.744 +02:00 [WRN] ⚠️ Slow Request Detected! Path: /Dashboard/DashboardStats, Method: GET, Time Taken: 3296ms
